{"version":3,"sources":["components/ActiveCallPanel/MergeInfo.js"],"names":["MergeInfo","nextProps","isLastCallEnded","props","onLastCallEnded","currentLocale","timeCounter","lastCallInfo","currentCallTitle","currentCallAvatarUrl","statusClasses","styles","callee_status","callee_status_disconnected","isOnConferenCall","calleeType","calleeTypes","conference","mergeInfo","merge_item","callee_avatar","avatarUrl","extraNum","callee_name","i18n","getString","name","status","sessionStatus","finished","merge_item_active","callee_avatar_active","callee_name_active","callee_status_active","Component","propTypes","PropTypes","string","isRequired","element","object","func","defaultProps","unknow","undefined"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;;;IAEMA,S;;;;;;;;;;8CAOsBC,S,EAAW;AACnC,UACED,UAAUE,eAAV,CAA0B,KAAKC,KAA/B,MAA0C,KAA1C,IACGH,UAAUE,eAAV,CAA0BD,SAA1B,MAAyC,IAD5C,IAEG,KAAKE,KAAL,CAAWC,eAHhB,EAIE;AACA,aAAKD,KAAL,CAAWC,eAAX;AACD;AACF;;;6BAEQ;AAAA;;AAAA,mBAOH,KAAKD,KAPF;AAAA,UAELE,aAFK,UAELA,aAFK;AAAA,UAGLC,WAHK,UAGLA,WAHK;AAAA,UAILC,YAJK,UAILA,YAJK;AAAA,UAKLC,gBALK,UAKLA,gBALK;AAAA,UAMLC,oBANK,UAMLA,oBANK;;;AASP,UAAMP,kBAAkBF,UAAUE,eAAV,CAA0B,KAAKC,KAA/B,CAAxB;AACA,UAAMO,gBAAgB,wFACnBC,iBAAOC,aADY,EACI,IADJ,8CAEnBD,iBAAOE,0BAFY,EAEiBX,eAFjB,gBAAtB;;AAKA,UAAMY,mBAAmB,CAAC,EACxBP,gBAAgBA,aAAaQ,UAAb,KAA4BC,sBAAYC,UADhC,CAA1B;;AAIA,aAAOV,eACL;AAAA;AAAA,UAAK,WAAWI,iBAAOO,SAAvB;AACE;AAAA;AAAA,YAAK,WAAWP,iBAAOQ,UAAvB;AACE;AAAA;AAAA,cAAK,WAAWR,iBAAOS,aAAvB;AACE,0CAAC,oBAAD;AACE,yBAAWb,aAAac,SAD1B;AAEE,wBAAUP,mBAAmBP,aAAae,QAAhC,GAA2C,CAFvD;AAGE,kCAAoBR;AAHtB;AADF,WADF;AAQE;AAAA;AAAA,cAAK,WAAWH,iBAAOY,WAAvB;AAEKhB,yBAAaQ,UAAb,KAA4BC,sBAAYC,UAAzC,GACIO,eAAKC,SAAL,CAAe,gBAAf,EAAiCpB,aAAjC,CADJ,GAEIE,aAAamB;AAJrB,WARF;AAeE;AAAA;AAAA,cAAK,WAAWhB,aAAhB;AACGH,yBAAaoB,MAAb,KAAwBC,wBAAcC,QAAtC,GACGL,eAAKC,SAAL,CAAe,cAAf,EAA+BpB,aAA/B,CADH,GAEGmB,eAAKC,SAAL,CAAe,QAAf,EAAyBpB,aAAzB;AAHN;AAfF,SADF;AAsBE;AAAA;AAAA,YAAK,WAAWM,iBAAOmB,iBAAvB;AACE;AAAA;AAAA,cAAK,WAAWnB,iBAAOoB,oBAAvB;AAEItB,mCACI,8BAAC,oBAAD,IAAY,WAAWA,oBAAvB,GADJ,GAEI,8BAAC,oBAAD,IAAY,WAAW,IAAvB;AAJR,WADF;AAQE;AAAA;AAAA,cAAK,WAAWE,iBAAOqB,kBAAvB;AACGxB;AADH,WARF;AAWE;AAAA;AAAA,cAAK,WAAWG,iBAAOsB,oBAAvB;AACG3B;AADH;AAXF;AAtBF,OADK,GAuCF,2CAvCL;AAwCD;;;0CA3EwC;AAAA,UAAhBC,YAAgB,QAAhBA,YAAgB;;AACvC,aAAO,CAAC,EACNA,gBAAgBA,aAAaoB,MAAb,KAAwBC,wBAAcC,QADhD,CAAR;AAGD;;;EALqBK,gB;;AA+ExBlC,UAAUmC,SAAV,GAAsB;AACpB9B,iBAAe+B,oBAAUC,MAAV,CAAiBC,UADZ;AAEpBhC,eAAa8B,oBAAUG,OAAV,CAAkBD,UAFX;AAGpB/B,gBAAc6B,oBAAUI,MAHJ;AAIpBpC,mBAAiBgC,oBAAUK,IAJP;AAKpBjC,oBAAkB4B,oBAAUC,MALR;AAMpB5B,wBAAsB2B,oBAAUC;AANZ,CAAtB;;AASArC,UAAU0C,YAAV,GAAyB;AACvBnC,gBAAc,EAAEQ,YAAYC,sBAAY2B,MAA1B,EADS;AAEvBvC,mBAAiBwC,SAFM;AAGvBpC,oBAAkBoC,SAHK;AAIvBnC,wBAAsBmC;AAJC,CAAzB;;kBAOe5C,S","file":"MergeInfo.js","sourcesContent":["import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport classnames from 'classnames';\nimport sessionStatus from 'ringcentral-integration/modules/Webphone/sessionStatus';\nimport calleeTypes from 'ringcentral-integration/enums/calleeTypes';\nimport styles from './styles.scss';\nimport i18n from './i18n';\nimport CallAvatar from '../CallAvatar';\n\nclass MergeInfo extends Component {\n  static isLastCallEnded({ lastCallInfo }) {\n    return !!(\n      lastCallInfo && lastCallInfo.status === sessionStatus.finished\n    );\n  }\n\n  componentWillReceiveProps(nextProps) {\n    if (\n      MergeInfo.isLastCallEnded(this.props) === false\n      && MergeInfo.isLastCallEnded(nextProps) === true\n      && this.props.onLastCallEnded\n    ) {\n      this.props.onLastCallEnded();\n    }\n  }\n\n  render() {\n    const {\n      currentLocale,\n      timeCounter,\n      lastCallInfo,\n      currentCallTitle,\n      currentCallAvatarUrl,\n    } = this.props;\n\n    const isLastCallEnded = MergeInfo.isLastCallEnded(this.props);\n    const statusClasses = classnames({\n      [styles.callee_status]: true,\n      [styles.callee_status_disconnected]: isLastCallEnded,\n    });\n\n    const isOnConferenCall = !!(\n      lastCallInfo && lastCallInfo.calleeType === calleeTypes.conference\n    );\n\n    return lastCallInfo ? (\n      <div className={styles.mergeInfo}>\n        <div className={styles.merge_item}>\n          <div className={styles.callee_avatar}>\n            <CallAvatar\n              avatarUrl={lastCallInfo.avatarUrl}\n              extraNum={isOnConferenCall ? lastCallInfo.extraNum : 0}\n              isOnConferenceCall={isOnConferenCall}\n            />\n          </div>\n          <div className={styles.callee_name}>\n            {\n              (lastCallInfo.calleeType === calleeTypes.conference)\n                ? i18n.getString('conferenceCall', currentLocale)\n                : lastCallInfo.name\n            }\n          </div>\n          <div className={statusClasses}>\n            {lastCallInfo.status === sessionStatus.finished\n              ? i18n.getString('disconnected', currentLocale)\n              : i18n.getString('onHold', currentLocale)}\n          </div>\n        </div>\n        <div className={styles.merge_item_active}>\n          <div className={styles.callee_avatar_active} >\n            {\n              currentCallAvatarUrl\n                ? <CallAvatar avatarUrl={currentCallAvatarUrl} />\n                : <CallAvatar avatarUrl={null} />\n            }\n          </div>\n          <div className={styles.callee_name_active}>\n            {currentCallTitle}\n          </div>\n          <div className={styles.callee_status_active}>\n            {timeCounter}\n          </div>\n        </div>\n      </div>\n    ) : (<span />);\n  }\n}\n\nMergeInfo.propTypes = {\n  currentLocale: PropTypes.string.isRequired,\n  timeCounter: PropTypes.element.isRequired,\n  lastCallInfo: PropTypes.object,\n  onLastCallEnded: PropTypes.func,\n  currentCallTitle: PropTypes.string,\n  currentCallAvatarUrl: PropTypes.string,\n};\n\nMergeInfo.defaultProps = {\n  lastCallInfo: { calleeType: calleeTypes.unknow },\n  onLastCallEnded: undefined,\n  currentCallTitle: undefined,\n  currentCallAvatarUrl: undefined,\n};\n\nexport default MergeInfo;\n"]}