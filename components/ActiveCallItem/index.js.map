{"version":3,"sources":["components/ActiveCallItem/index.js"],"names":["callIconMap","callDirections","inbound","dynamicsFont","outbound","CallIcon","direction","ringing","inboundTitle","outboundTitle","isOnConferenceCall","showAvatar","avatarUrl","extraNum","title","symbol","styles","callIcon","avatar","activeCall","propTypes","PropTypes","string","isRequired","bool","defaultProps","undefined","WebphoneButtons","currentLocale","session","webphoneAnswer","webphoneReject","webphoneHangup","webphoneResume","showAnswer","showMergeCall","disableMerge","onMergeCall","hangupFunc","resumeFunc","endIcon","EndIcon","mergeIcon","MergeIntoConferenceIcon","rejectTitle","i18n","getString","acceptTitle","mergeTitle","callStatus","sessionStatus","connecting","VoicemailIcon","webphoneButtons","webphoneButton","mergeButton","disabled","e","stopPropagation","rejectButton","id","answerButton","AnswerIcon","object","func","ActiveCallItem","props","onSelectContact","value","nameMatches","getContactMatches","selected","findIndex","match","_userSelection","setState","call","activityMatches","length","autoLog","logCall","redirect","getSelectedContact","state","contactMatches","clickToSms","onClickToSms","phoneNumber","getPhoneNumber","contact","formatted","formatPhone","name","enableContactFallback","getFallbackContactName","createSelectedContact","entityType","onCreateContact","_mounted","isCreating","viewSelectedContact","onViewContact","bind","isLogging","extended","contactDisplay","toggleExtended","contains","target","preState","webphoneToVoicemail","sessionId","toVoicemailTimeout","setTimeout","clearTimeout","from","to","nextProps","fromMatches","toMatches","extensionNumber","telephonyStatus","startTime","webphoneSession","offset","disableLinks","showCallDetail","myPhoneNumber","getMyPhoneNumber","callDetail","label","telephonyStatusInfo","split","onLogCall","areaCode","countryCode","outboundSmsPermission","internalSmsPermission","brand","showContactDisplayPlaceholder","sourceIcons","renderContactName","renderExtraButton","contactDisplayStyle","externalViewEntity","externalHasEntity","readTextPermission","hasActionMenu","parsedInfo","isExtension","hasPlus","number","disableClickToSms","fallbackContactName","getCallInfo","contactName","extraButton","root","wrapper","infoWrapper","conferenceContactDisplay","Component","shape","array"],"mappings":"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","file":"index.js","sourcesContent":["import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport classnames from 'classnames';\nimport sessionStatus from 'ringcentral-integration/modules/Webphone/sessionStatus';\nimport callDirections from 'ringcentral-integration/enums/callDirections';\nimport { isInbound, isRinging } from 'ringcentral-integration/lib/callLogHelpers';\nimport parseNumber from 'ringcentral-integration/lib/parseNumber';\n\nimport dynamicsFont from '../../assets/DynamicsFont/DynamicsFont.scss';\nimport DurationCounter from '../DurationCounter';\nimport CallAvatar from '../CallAvatar';\nimport ContactDisplay from '../ContactDisplay';\nimport ActionMenu from '../ActionMenu';\nimport CircleButton from '../CircleButton';\nimport EndIcon from '../../assets/images/End.svg';\nimport AnswerIcon from '../../assets/images/Answer.svg';\nimport VoicemailIcon from '../../assets/images/Voicemail.svg';\nimport ConferenceCallIcon from '../../assets/images/ConferenceCallIcon.svg';\nimport MergeIntoConferenceIcon from '../../assets/images/MergeIntoConferenceIcon.svg';\n\nimport styles from './styles.scss';\nimport i18n from './i18n';\n\nconst callIconMap = {\n  [callDirections.inbound]: dynamicsFont.inbound,\n  [callDirections.outbound]: dynamicsFont.outbound,\n};\n\nfunction CallIcon({\n  direction,\n  ringing,\n  inboundTitle,\n  outboundTitle,\n  isOnConferenceCall,\n  showAvatar,\n  avatarUrl,\n  extraNum = 0,\n}) {\n  const title = (direction === callDirections.inbound) ? inboundTitle : outboundTitle;\n  let symbol;\n  if (showAvatar) {\n    symbol = (\n      <div className={classnames(styles.callIcon, styles.avatar)}>\n        <CallAvatar\n          isOnConferenceCall={isOnConferenceCall}\n          avatarUrl={avatarUrl}\n          extraNum={extraNum} />\n      </div>\n    );\n  } else {\n    symbol = (\n      <div className={styles.callIcon}>\n        {isOnConferenceCall\n          ? <ConferenceCallIcon />\n          : <span\n            className={classnames(\n              callIconMap[direction],\n              styles.activeCall,\n              ringing && styles.ringing,\n            )}\n            title={title}\n          />\n        }\n      </div>\n    );\n  }\n  return symbol;\n}\n\nCallIcon.propTypes = {\n  direction: PropTypes.string.isRequired,\n  ringing: PropTypes.bool,\n  isOnConferenceCall: PropTypes.bool,\n  inboundTitle: PropTypes.string,\n  outboundTitle: PropTypes.string,\n  showAvatar: PropTypes.bool,\n  avatarUrl: PropTypes.string\n};\n\nCallIcon.defaultProps = {\n  ringing: false,\n  isOnConferenceCall: false,\n  inboundTitle: undefined,\n  outboundTitle: undefined,\n  showAvatar: false,\n  avatarUrl: null,\n};\n\nfunction WebphoneButtons({\n  currentLocale,\n  session,\n  webphoneAnswer,\n  webphoneReject,\n  webphoneHangup,\n  webphoneResume,\n  showAnswer,\n  showMergeCall,\n  disableMerge,\n  onMergeCall,\n}) {\n  if (!session || !webphoneAnswer || !webphoneHangup) {\n    return null;\n  }\n  let hangupFunc = webphoneHangup;\n  let resumeFunc = webphoneResume;\n  let endIcon = EndIcon;\n  const mergeIcon = MergeIntoConferenceIcon;\n  let rejectTitle = i18n.getString('hangup', currentLocale);\n  const acceptTitle = i18n.getString('accept', currentLocale);\n  const mergeTitle = i18n.getString('mergeToConference', currentLocale);\n  if (\n    session.direction === callDirections.inbound &&\n    session.callStatus === sessionStatus.connecting\n  ) {\n    hangupFunc = webphoneReject;\n    resumeFunc = webphoneAnswer;\n    endIcon = VoicemailIcon;\n    rejectTitle = i18n.getString('toVoicemail', currentLocale);\n  }\n  return (\n    <div className={styles.webphoneButtons}>\n      {\n        showMergeCall ?\n          <span title={mergeTitle} className={styles.webphoneButton}>\n            <CircleButton\n              className={disableMerge\n                ? classnames(styles.mergeButton, styles.disabled)\n                : styles.mergeButton}\n              onClick={(e) => {\n                e.stopPropagation();\n                onMergeCall();\n              }}\n              iconWidth={260}\n              iconX={120}\n              icon={mergeIcon}\n              showBorder\n              disabled={disableMerge}\n            />\n          </span>\n          : null\n      }\n      <span title={rejectTitle} className={styles.webphoneButton}>\n        <CircleButton\n          className={styles.rejectButton}\n          onClick={(e) => {\n            e.stopPropagation();\n            hangupFunc(session.id);\n          }}\n          iconWidth={260}\n          iconX={120}\n          icon={endIcon}\n          showBorder={false}\n        />\n      </span>\n      {\n        showAnswer ?\n          <span title={acceptTitle} className={styles.webphoneButton}>\n            <CircleButton\n              className={styles.answerButton}\n              onClick={(e) => {\n                e.stopPropagation();\n                resumeFunc(session.id);\n              }}\n              icon={AnswerIcon}\n              showBorder={false}\n            />\n          </span>\n          : null\n      }\n    </div>\n  );\n}\n\nWebphoneButtons.propTypes = {\n  currentLocale: PropTypes.string.isRequired,\n  session: PropTypes.object,\n  webphoneAnswer: PropTypes.func,\n  webphoneReject: PropTypes.func,\n  webphoneHangup: PropTypes.func,\n  webphoneResume: PropTypes.func,\n  showAnswer: PropTypes.bool,\n  disableMerge: PropTypes.bool,\n  showMergeCall: PropTypes.bool,\n  onMergeCall: PropTypes.func,\n};\n\nWebphoneButtons.defaultProps = {\n  session: undefined,\n  webphoneAnswer: undefined,\n  webphoneReject: undefined,\n  webphoneHangup: undefined,\n  webphoneResume: undefined,\n  showAnswer: true,\n  disableMerge: false,\n  showMergeCall: false,\n  onMergeCall: undefined,\n};\n\nexport default class ActiveCallItem extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      selected: 0,\n      isLogging: false,\n      extended: false,\n      isCreating: false,\n    };\n    this._userSelection = false;\n    this.contactDisplay = null;\n\n    this.toggleExtended = (e) => {\n      if (this.props.isOnConferenceCall) {\n        return;\n      }\n      if ((\n        this.contactDisplay &&\n        this.contactDisplay.contains(e.target))\n      ) {\n        return;\n      }\n      this.setState(preState => ({\n        extended: !preState.extended,\n      }));\n    };\n\n    this.webphoneToVoicemail = (sessionId) => {\n      if (typeof this.props.webphoneToVoicemail !== 'function') {\n        return;\n      }\n      this.props.webphoneToVoicemail(sessionId);\n      this.toVoicemailTimeout = setTimeout(() => {\n        this.props.webphoneReject(sessionId);\n      }, 3000);\n    };\n  }\n\n  componentDidMount() {\n    this._mounted = true;\n  }\n\n  componentWillUnmount() {\n    this._mounted = false;\n    if (this.toVoicemailTimeout) {\n      clearTimeout(this.toVoicemailTimeout);\n      this.toVoicemailTimeout = null;\n    }\n  }\n\n  onSelectContact = (value) => {\n    const nameMatches = this.getContactMatches();\n    const selected = nameMatches.findIndex(\n      match => match.id === value.id\n    );\n    this._userSelection = true;\n    this.setState({\n      selected,\n    });\n    if (\n      this.props.call.activityMatches.length > 0 &&\n      this.props.autoLog\n    ) {\n      this.logCall({ redirect: false, selected });\n    }\n  }\n\n  getFallbackContactName() {\n    return isInbound(this.props.call) ?\n      (this.props.call.from.name) :\n      (this.props.call.to.name);\n  }\n\n  getSelectedContact = (selected = this.state.selected) => {\n    const contactMatches = this.getContactMatches();\n    return (selected > -1 && contactMatches[selected]) ||\n      (contactMatches.length === 1 && contactMatches[0]) ||\n      null;\n  }\n\n  getContactMatches(nextProps = this.props) {\n    return isInbound(nextProps.call) ?\n      nextProps.call.fromMatches :\n      nextProps.call.toMatches;\n  }\n\n  getPhoneNumber() {\n    return isInbound(this.props.call) ?\n      (this.props.call.from.phoneNumber || this.props.call.from.extensionNumber) :\n      (this.props.call.to.phoneNumber || this.props.call.to.extensionNumber);\n  }\n\n  getMyPhoneNumber() {\n    return isInbound(this.props.call) ?\n      (this.props.call.to.phoneNumber || this.props.call.to.extensionNumber) :\n      (this.props.call.from.phoneNumber || this.props.call.from.extensionNumber);\n  }\n\n  getCallInfo() {\n    const {\n      call: {\n        telephonyStatus,\n        startTime,\n        webphoneSession,\n        offset,\n      },\n      disableLinks,\n      currentLocale,\n      formatPhone,\n      showCallDetail,\n    } = this.props;\n\n    if (!showCallDetail) {\n      return null;\n    }\n    const myPhoneNumber = this.getMyPhoneNumber();\n\n    if (webphoneSession) {\n      return (\n        <div className={styles.callDetail}>\n          <span className={styles.label}>\n            {\n              isInbound(this.props.call) ?\n                i18n.getString('to', currentLocale) :\n                i18n.getString('from', currentLocale)\n            }:\n          </span>\n          {\n            myPhoneNumber\n              ? formatPhone(myPhoneNumber)\n              : i18n.getString('anonymous', currentLocale)\n          }\n        </div>\n      );\n    }\n    const telephonyStatusInfo = i18n.getString(telephonyStatus, currentLocale);\n    return (\n      <div className={styles.callDetail}>\n        {\n          disableLinks ?\n            i18n.getString('unavailable', currentLocale) :\n            <DurationCounter startTime={startTime} offset={offset} />\n        }\n        <span className={styles.split}>|</span>\n        <span title={telephonyStatusInfo}>\n          {telephonyStatusInfo}\n        </span>\n      </div>\n    );\n  }\n\n  clickToSms = () => {\n    if (this.props.onClickToSms) {\n      const phoneNumber = this.getPhoneNumber();\n      const contact = this.getSelectedContact();\n      if (contact) {\n        this.props.onClickToSms({\n          ...contact,\n          phoneNumber,\n        });\n      } else {\n        const formatted = this.props.formatPhone(phoneNumber);\n        this.props.onClickToSms({\n          name: this.props.enableContactFallback ? this.getFallbackContactName() : formatted,\n          phoneNumber,\n        }, true);\n      }\n    }\n  }\n\n  createSelectedContact = async (entityType) => {\n    // console.log('click createSelectedContact!!', entityType);\n    if (typeof this.props.onCreateContact === 'function' &&\n      this._mounted &&\n      !this.state.isCreating) {\n      this.setState({\n        isCreating: true,\n      });\n      // console.log('start to create: isCreating...', this.state.isCreating);\n      const phoneNumber = this.getPhoneNumber();\n      await this.props.onCreateContact({\n        phoneNumber,\n        name: this.props.enableContactFallback ? this.getFallbackContactName() : '',\n        entityType,\n      });\n\n      if (this._mounted) {\n        this.setState({\n          isCreating: false,\n        });\n        // console.log('created: isCreating...', this.state.isCreating);\n      }\n    }\n  }\n\n  viewSelectedContact = () => {\n    if (typeof this.props.onViewContact === 'function') {\n      this.props.onViewContact({\n        contact: this.getSelectedContact(),\n      });\n    }\n  }\n\n  async logCall({ redirect = true, selected }) {\n    if (\n      typeof this.props.onLogCall === 'function' &&\n      this._mounted &&\n      !this.state.isLogging\n    ) {\n      this.setState({\n        isLogging: true,\n      });\n      await this.props.onLogCall({\n        contact: this.getSelectedContact(selected),\n        call: this.props.call,\n        redirect,\n      });\n      if (this._mounted) {\n        this.setState({\n          isLogging: false,\n        });\n      }\n    }\n  }\n\n  logCall = this.logCall.bind(this)\n\n  render() {\n    const {\n      call: {\n        direction,\n        activityMatches,\n        webphoneSession,\n      },\n      disableLinks,\n      currentLocale,\n      areaCode,\n      countryCode,\n      outboundSmsPermission,\n      internalSmsPermission,\n      enableContactFallback,\n      isLogging,\n      brand,\n      showContactDisplayPlaceholder,\n      onClickToSms,\n      onViewContact,\n      onCreateContact,\n      onLogCall,\n      webphoneAnswer,\n      webphoneHangup,\n      webphoneResume,\n      sourceIcons,\n      renderContactName,\n      renderExtraButton,\n      contactDisplayStyle,\n      externalViewEntity,\n      externalHasEntity,\n      readTextPermission,\n      isOnConferenceCall,\n      showMergeCall,\n      onMergeCall,\n      disableMerge,\n      hasActionMenu,\n      showAnswer,\n      avatarUrl,\n      showAvatar,\n    } = this.props;\n    const phoneNumber = this.getPhoneNumber();\n    const parsedInfo = parseNumber({\n      phoneNumber,\n      countryCode,\n      areaCode,\n    });\n    const isExtension = !parsedInfo.hasPlus &&\n      parsedInfo.number && parsedInfo.number.length <= 6;\n    const disableClickToSms = !(\n      onClickToSms &&\n      (\n        isExtension ?\n          internalSmsPermission :\n          outboundSmsPermission\n      )\n    );\n    const contactMatches = this.getContactMatches();\n    const fallbackContactName = this.getFallbackContactName();\n    const ringing = isRinging(this.props.call);\n    const callDetail = this.getCallInfo();\n    const contactName = typeof renderContactName === 'function' ?\n      renderContactName(this.props.call) :\n      undefined;\n    const extraButton = typeof renderExtraButton === 'function' ?\n      renderExtraButton(this.props.call) :\n      undefined;\n\n    return (\n      <div className={styles.root} onClick={this.toggleExtended}>\n        <div className={styles.wrapper}>\n          <CallIcon\n            direction={direction}\n            ringing={ringing}\n            active\n            missed={false}\n            inboundTitle={i18n.getString('inboundCall', currentLocale)}\n            outboundTitle={i18n.getString('outboundCall', currentLocale)}\n            missedTitle={i18n.getString('missedCall', currentLocale)}\n            isOnConferenceCall={isOnConferenceCall}\n            showAvatar={showAvatar}\n            avatarUrl={avatarUrl}\n          />\n          <div className={styles.infoWrapper}>\n            <ContactDisplay\n              isOnConferenceCall={isOnConferenceCall}\n              contactName={contactName}\n              className={\n                isOnConferenceCall\n                  ? classnames(styles.conferenceContactDisplay)\n                  : classnames(styles.contactDisplay, contactDisplayStyle)\n              }\n              contactMatches={contactMatches}\n              selected={this.state.selected}\n              onSelectContact={this.onSelectContact}\n              disabled={disableLinks}\n              isLogging={isLogging || this.state.isLogging}\n              fallBackName={fallbackContactName}\n              enableContactFallback={enableContactFallback}\n              areaCode={areaCode}\n              countryCode={countryCode}\n              phoneNumber={phoneNumber}\n              currentLocale={currentLocale}\n              brand={brand}\n              showPlaceholder={showContactDisplayPlaceholder}\n              showType={false}\n              sourceIcons={sourceIcons}\n              stopPropagation\n            />\n            {isOnConferenceCall ? null : callDetail}\n          </div>\n          <WebphoneButtons\n            session={webphoneSession}\n            webphoneAnswer={webphoneAnswer}\n            webphoneReject={this.webphoneToVoicemail}\n            webphoneHangup={webphoneHangup}\n            webphoneResume={webphoneResume}\n            showMergeCall={showMergeCall}\n            onMergeCall={onMergeCall}\n            disableMerge={disableMerge}\n            currentLocale={currentLocale}\n            showAnswer={showAnswer}\n          />\n          {extraButton}\n        </div>\n        {\n          hasActionMenu\n            ? <ActionMenu\n              extended={this.state.extended}\n              onToggle={this.toggleExtended}\n              currentLocale={currentLocale}\n              disableLinks={disableLinks}\n              phoneNumber={phoneNumber}\n              onClickToSms={\n                readTextPermission ?\n                  () => this.clickToSms({ countryCode, areaCode })\n                  : undefined\n              }\n              hasEntity={!!contactMatches.length}\n              onViewEntity={onViewContact && this.viewSelectedContact}\n              onCreateEntity={onCreateContact && this.createSelectedContact}\n              textTitle={i18n.getString('text', currentLocale)}\n              onLog={onLogCall}\n              isLogging={isLogging || this.state.isLogging}\n              isLogged={activityMatches.length > 0}\n              isCreating={this.state.isCreating}\n              addLogTitle={i18n.getString('addLog', currentLocale)}\n              editLogTitle={i18n.getString('editLog', currentLocale)}\n              createEntityTitle={i18n.getString('addEntity', currentLocale)}\n              viewEntityTitle={i18n.getString('viewDetails', currentLocale)}\n              externalViewEntity={() => externalViewEntity && externalViewEntity(this.props.call)}\n              externalHasEntity={externalHasEntity && externalHasEntity(this.props.call)}\n              disableClickToSms={disableClickToSms}\n            />\n            : null\n        }\n      </div>\n    );\n  }\n}\n\nActiveCallItem.propTypes = {\n  call: PropTypes.shape({\n    direction: PropTypes.string.isRequired,\n    telephonyStatus: PropTypes.string,\n    startTime: PropTypes.number.isRequired,\n    activityMatches: PropTypes.array.isRequired,\n    fromMatches: PropTypes.array.isRequired,\n    toMatches: PropTypes.array.isRequired,\n    from: PropTypes.shape({\n      phoneNumber: PropTypes.string,\n      extensionNumber: PropTypes.string,\n      name: PropTypes.string,\n    }).isRequired,\n    to: PropTypes.shape({\n      phoneNumber: PropTypes.string,\n      extensionNumber: PropTypes.string,\n      name: PropTypes.string,\n    }),\n    webphoneSession: PropTypes.object,\n  }).isRequired,\n  areaCode: PropTypes.string.isRequired,\n  countryCode: PropTypes.string.isRequired,\n  currentLocale: PropTypes.string.isRequired,\n  disableLinks: PropTypes.bool,\n  outboundSmsPermission: PropTypes.bool,\n  internalSmsPermission: PropTypes.bool,\n  isLogging: PropTypes.bool,\n  webphoneAnswer: PropTypes.func,\n  webphoneReject: PropTypes.func,\n  webphoneHangup: PropTypes.func,\n  webphoneResume: PropTypes.func,\n  webphoneToVoicemail: PropTypes.func,\n  enableContactFallback: PropTypes.bool,\n  autoLog: PropTypes.bool,\n  brand: PropTypes.string,\n  showContactDisplayPlaceholder: PropTypes.bool,\n  formatPhone: PropTypes.func.isRequired,\n  onClickToSms: PropTypes.func,\n  onCreateContact: PropTypes.func,\n  onLogCall: PropTypes.func,\n  onViewContact: PropTypes.func,\n  sourceIcons: PropTypes.object,\n  renderContactName: PropTypes.func,\n  renderExtraButton: PropTypes.func,\n  contactDisplayStyle: PropTypes.string,\n  externalViewEntity: PropTypes.func,\n  externalHasEntity: PropTypes.func,\n  readTextPermission: PropTypes.bool,\n  isOnConferenceCall: PropTypes.bool,\n  disableMerge: PropTypes.bool,\n  hasActionMenu: PropTypes.bool,\n  showAnswer: PropTypes.bool,\n  avatarUrl: PropTypes.string,\n  showAvatar: PropTypes.bool,\n  showCallDetail: PropTypes.bool,\n  showMergeCall: PropTypes.bool,\n  onMergeCall: PropTypes.func,\n};\n\nActiveCallItem.defaultProps = {\n  onLogCall: undefined,\n  onClickToSms: undefined,\n  onViewContact: undefined,\n  onCreateContact: undefined,\n  isLogging: false,\n  outboundSmsPermission: false,\n  internalSmsPermission: false,\n  disableLinks: false,\n  webphoneAnswer: undefined,\n  webphoneReject: undefined,\n  webphoneHangup: undefined,\n  webphoneResume: undefined,\n  webphoneToVoicemail: undefined,\n  enableContactFallback: undefined,\n  autoLog: false,\n  brand: 'RingCentral',\n  showContactDisplayPlaceholder: true,\n  sourceIcons: undefined,\n  renderContactName: undefined,\n  renderExtraButton: undefined,\n  contactDisplayStyle: undefined,\n  externalViewEntity: undefined,\n  externalHasEntity: undefined,\n  readTextPermission: true,\n  isOnConferenceCall: false,\n  disableMerge: false,\n  hasActionMenu: true,\n  showAnswer: true,\n  avatarUrl: null,\n  showAvatar: false,\n  showCallDetail: true,\n  showMergeCall: false,\n  onMergeCall: undefined,\n};\n"]}